/**
 * Copyright (c) 2016 Sqreen. All Rights Reserved.
 * Please refer to our terms for more information: https://www.sqreen.io/terms.html
 */
'use strict';
const Code = require('code');
const Lab = require('lab');
const lab = exports.lab = Lab.script();

const describe = lab.describe;
const it = lab.it;
const expect = Code.expect;

const Util = require('../../../lib/metric/util');

describe('Metric util', () => {

    describe('getKey', () => {

        it('should do the tests', { plan: 3 }, (done) => {

            expect(Util.getKey('a')).to.equal('a');
            expect(Util.getKey({ a: 1 })).to.equal(JSON.stringify({ a: 1 }));

            const x = { a: { a: 1 } };
            x.a.x = x;
            expect(Util.getKey(x)).to.equal('{ a: { a: 1, x: [Circular] } }');
            done();
        });
    });
});
